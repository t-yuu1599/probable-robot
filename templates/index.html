<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ÁâõËÇâÂà§ÂÆö">
    
    <title>ÁâõËÇâ„Éû„Éº„Éñ„É™„É≥„Ç∞Âà§ÂÆö„Ç∑„Çπ„ÉÜ„É†</title>
    <meta name="description" content="‰∏ä„Ç´„É´„Éì/‰∏¶„Ç´„É´„Éì„ÅÆÂç≥Â∫ßÂà§ÂÆö - PWA„Ç¢„Éó„É™">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- „Ç¢„Ç§„Ç≥„É≥ -->
    <link rel="icon" type="image/png" sizes="192x192" href="/static/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/static/icons/icon-512.png">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- „Ç´„Çπ„Çø„É†CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/mobile.css">
</head>
<body>
    <!-- „Ç§„É≥„Çπ„Éà„Éº„É´„Éó„É≠„É≥„Éó„Éà -->
    <div id="installPrompt" class="alert alert-info alert-dismissible fade show d-none" role="alert">
        <i class="bi bi-download"></i>
        <strong>„Ç¢„Éó„É™„Çí„Ç§„É≥„Çπ„Éà„Éº„É´</strong> - „Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Åó„Å¶Á∞°Âçò„Ç¢„ÇØ„Çª„ÇπÔºÅ
        <button type="button" class="btn btn-sm btn-outline-primary ms-2" id="installButton">
            <i class="bi bi-plus-square"></i> „Ç§„É≥„Çπ„Éà„Éº„É´
        </button>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
    <div class="container-fluid">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="row bg-primary text-white py-3 mb-4">
            <div class="col-12 text-center">
                <h1 class="h3 mb-0">
                    <i class="bi bi-camera-fill"></i>
                    ü•© ÁâõËÇâ„Éû„Éº„Éñ„É™„É≥„Ç∞Âà§ÂÆö
                </h1>
                <small class="text-light">‰∏ä„Ç´„É´„Éì / ‰∏¶„Ç´„É´„Éì Âç≥Â∫ßÂà§ÂÆö</small>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢ -->
        <main class="row justify-content-center">
            <div class="col-12 col-lg-8">
                
                <!-- „Ç´„É°„É©„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <section class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">
                            <i class="bi bi-camera"></i> „Ç´„É°„É©ÊíÆÂΩ±
                        </h5>
                    </div>
                    <div class="card-body text-center">
                        <!-- „Ç´„É°„É©„Éì„É•„Éº„Ç®„É™„Ç¢ -->
                        <div id="cameraContainer" class="camera-container mb-3">
                            <video id="cameraVideo" class="camera-view" autoplay playsinline></video>
                            <canvas id="captureCanvas" class="d-none"></canvas>
                            
                            <!-- „Éó„É¨„Éì„É•„ÉºÁîªÂÉè -->
                            <div id="imagePreview" class="image-preview d-none">
                                <img id="previewImage" class="preview-img" alt="ÊíÆÂΩ±ÁîªÂÉè">
                                <div class="preview-overlay">
                                    <button class="btn btn-sm btn-outline-light" id="retakeButton">
                                        <i class="bi bi-arrow-clockwise"></i> ÂÜçÊíÆÂΩ±
                                    </button>
                                </div>
                            </div>
                            
                            <!-- „Ç´„É°„É©Êú™ÂØæÂøú„É°„ÉÉ„Çª„Éº„Ç∏ -->
                            <div id="noCameraMessage" class="alert alert-warning d-none">
                                <i class="bi bi-exclamation-triangle"></i>
                                „Ç´„É°„É©„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
                            </div>
                        </div>
                        
                        <!-- Êìç‰Ωú„Éú„Çø„É≥ -->
                        <div class="camera-controls">
                            <button id="captureButton" class="btn btn-success btn-lg me-2">
                                <i class="bi bi-camera-fill"></i> ÊíÆÂΩ±
                            </button>
                            <button id="fileButton" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-folder-open"></i> „Éï„Ç°„Ç§„É´ÈÅ∏Êäû
                            </button>
                            <input type="file" id="fileInput" class="d-none" accept="image/*">
                        </div>
                        
                        <!-- Âà§ÂÆö„Éú„Çø„É≥ -->
                        <div class="prediction-controls mt-3 d-none" id="predictionControls">
                            <button id="predictButton" class="btn btn-warning btn-lg">
                                <i class="bi bi-cpu"></i> Âà§ÂÆöÂÆüË°å
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Âà§ÂÆöÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <section class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">
                            <i class="bi bi-bar-chart"></i> Âà§ÂÆöÁµêÊûú
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- ÂæÖÊ©üÁä∂ÊÖã -->
                        <div id="resultWaiting" class="text-center text-muted">
                            <i class="bi bi-hourglass-split fs-1"></i>
                            <p class="mt-2">Âà§ÂÆöÂæÖÊ©ü‰∏≠...</p>
                        </div>
                        
                        <!-- Âá¶ÁêÜ‰∏≠Áä∂ÊÖã -->
                        <div id="resultProcessing" class="text-center d-none">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Âá¶ÁêÜ‰∏≠...</span>
                            </div>
                            <p class="mt-2">Âà§ÂÆöÂá¶ÁêÜ‰∏≠...</p>
                        </div>
                        
                        <!-- Âà§ÂÆöÁµêÊûúË°®Á§∫ -->
                        <div id="resultDisplay" class="d-none">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="result-card p-3 rounded">
                                        <div class="result-classification">
                                            <i class="bi bi-award-fill fs-1"></i>
                                            <h3 id="classificationText" class="classification-text"></h3>
                                            <span id="predictionBadge" class="badge badge-result"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="result-details">
                                        <div class="confidence-display">
                                            <label class="form-label">‰ø°È†ºÂ∫¶</label>
                                            <div class="progress mb-2">
                                                <div id="confidenceBar" class="progress-bar" role="progressbar"></div>
                                            </div>
                                            <span id="confidenceText" class="fw-bold"></span>
                                        </div>
                                        
                                        <div class="processing-time mt-3">
                                            <label class="form-label">Âá¶ÁêÜÊôÇÈñì</label>
                                            <p id="processingTime" class="mb-0"></p>
                                        </div>
                                        
                                        <div class="timestamp mt-3">
                                            <label class="form-label">Âà§ÂÆöÊó•ÊôÇ</label>
                                            <p id="timestampText" class="mb-0 text-muted"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- „Ç®„É©„ÉºË°®Á§∫ -->
                        <div id="resultError" class="alert alert-danger d-none">
                            <i class="bi bi-exclamation-triangle"></i>
                            <strong>„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</strong>
                            <p id="errorMessage" class="mb-0 mt-2"></p>
                        </div>
                    </div>
                </section>

                <!-- „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <section class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">
                            <i class="bi bi-info-circle"></i> „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="system-status">
                                    <label class="form-label">„Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖã</label>
                                    <div id="systemStatus" class="status-indicator">
                                        <span class="badge bg-secondary">Á¢∫Ë™ç‰∏≠...</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="model-info">
                                    <label class="form-label">„É¢„Éá„É´ÊÉÖÂ†±</label>
                                    <div id="modelInfo" class="text-muted">
                                        Ë™≠„ÅøËæº„Åø‰∏≠...
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-12">
                                <div class="connection-status">
                                    <label class="form-label">Êé•Á∂öÁä∂ÊÖã</label>
                                    <div id="connectionStatus" class="status-indicator">
                                        <span class="badge bg-info">Á¢∫Ë™ç‰∏≠...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- „Éï„ÉÉ„Çø„Éº -->
        <footer class="row mt-5">
            <div class="col-12 text-center text-muted py-3">
                <small>
                    ü•© ÁâõËÇâ„Éû„Éº„Éñ„É™„É≥„Ç∞Âà§ÂÆö„Ç∑„Çπ„ÉÜ„É† PWAÁâà v1.0<br>
                    ¬© 2025 AIÈñãÁô∫ÊîØÊè¥„Ç∑„Çπ„ÉÜ„É†
                </small>
            </div>
        </footer>
    </div>

    <!-- ToastÈÄöÁü•„Ç®„É™„Ç¢ -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <i id="toastIcon" class="bi bi-info-circle me-2"></i>
                <strong class="me-auto" id="toastTitle">ÈÄöÁü•</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                „É°„ÉÉ„Çª„Éº„Ç∏
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
    <script src="/static/js/camera.js"></script>
    <script src="/static/js/prediction.js"></script>
    
    <!-- Service WorkerÁôªÈå≤ -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/js/sw.js')
                    .then(registration => {
                        console.log('‚úì Service WorkerÁôªÈå≤ÊàêÂäü:', registration);
                    })
                    .catch(error => {
                        console.error('‚úó Service WorkerÁôªÈå≤Â§±Êïó:', error);
                    });
            });
        }
    </script>
</body>
</html> 